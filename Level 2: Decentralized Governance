// SPDX-License-Identifier: MIT
pragma solidity ^0.8.13;

contract DecentralizedGovernance{

    struct Candidate {
        string Name;
    
    uint voteGiven;
    }
    Candidate[] public candidates;

    //To track if a person has already voted
    mapping ( address => bool ) public voters;

    //Implementing appropriate logic to initialise list of candidate during deployment
    constructor(string[] memory _candidates) {
        for(uint i = 0; i < _candidates.length; i++){
            candidates.push(Candidate({
                Name: _candidates[i],
                voteGiven: 0
            }));
        }
    }

    //Voting for a candidate based on index
    function vote(uint _candidateIndex) public {
        //Checking if the voter has already voted
        require(!voters[msg.sender], "Already voted");
        
        require(_candidateIndex < candidates.length, "Invalid vote") ;
        
        voters[msg.sender] = true;
        
        candidates[_candidateIndex].voteGiven++;
    }

        //To get total number of candidates
        function GetTotalCandidates() public view returns(uint){
            return candidates.length;
        
        }

        //Getting the candidate details
        function GetCandidates(uint index) public view returns(string memory, uint){
            require(index < candidates.length, "Invalid index");
            return (candidates[index].Name, candidates[index].voteGiven);
        }
        }
    
